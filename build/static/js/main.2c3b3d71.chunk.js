(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},20:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),u=t.n(o),c=(t(20),t(4)),l=t(2),i=t(3),m=t.n(i),f="/api/people",d=function(){return m.a.get(f).then((function(e){return e.data}))},s=function(e){return m.a.post(f,e).then((function(e){return e.data}))},b=function(e){return m.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},h=function(e,n){return m.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){var n=e.handleFilterChange,t=e.filter;return r.a.createElement("div",null,"Filter shown with ",r.a.createElement("input",{onChange:n,value:t}))},p=function(e){var n=e.onSubmit,t=e.nameHandler,a=e.numberHandler,o=e.name,u=e.number;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"Name: ",r.a.createElement("input",{onChange:t,value:o})),r.a.createElement("div",null,"Number: ",r.a.createElement("input",{onChange:a,value:u})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add")))},E=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("li",{key:n.name},n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return t(n)}},"Delete"))},w=function(e){var n=e.people,t=e.filterValue,a=e.deletePerson,o=n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return r.a.createElement("div",null,o.map((function(e){return r.a.createElement(E,{key:e.name,person:e,deletePerson:a})})))},g=function(e){var n=e.message,t=e.error;return null===n&&null===t?null:null!==n?r.a.createElement("div",{className:"message"},n):null!==t?r.a.createElement("div",{className:"error"},t):void 0},j=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),i=Object(l.a)(u,2),m=i[0],f=i[1],E=Object(a.useState)(""),j=Object(l.a)(E,2),O=j[0],C=j[1],S=Object(a.useState)(""),k=Object(l.a)(S,2),y=k[0],L=k[1],N=Object(a.useState)(null),P=Object(l.a)(N,2),T=P[0],F=P[1],H=Object(a.useState)(null),A=Object(l.a)(H,2),D=A[0],I=A[1];Object(a.useEffect)((function(){d().then((function(e){o(e)}))}),[]);var J=function(e){var n=t.find((function(n){return n.name.toLowerCase()===e.name.toLowerCase()})).id;e=Object(c.a)(Object(c.a)({},e),{},{id:n}),h(n,e).then((function(e){o(t.map((function(t){return t.id!==n?t:e}))),f(""),C(""),F("Updated ".concat(e.name)),setTimeout((function(){F(null)}),2e3)})).catch((function(a){o(t.filter((function(e){return e.id!==n}))),I("Information of ".concat(e.name," has already been removed from the server")),setTimeout((function(){I(null)}),5e3)}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(g,{message:T,error:D}),r.a.createElement(v,{handleFilterChange:function(e){console.log("handler"),L(e.target.value)},filter:y}),r.a.createElement("h3",null,"Add a new"),r.a.createElement(p,{onSubmit:function(e){e.preventDefault();var n,a={name:m,number:O};n=a,t.every((function(e){return e.name.toLowerCase()!==n.name.toLowerCase()}))?s(a).then((function(e){o(t.concat(e)),f(""),C(""),F("Added ".concat(e.name)),setTimeout((function(){F(null)}),2e3)})):window.confirm("".concat(a.name," is already added to the phonebook,\n             replace the old number with a new one?"))&&J(a)},nameHandler:function(e){f(e.target.value)},numberHandler:function(e){C(e.target.value)},name:m,number:O}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(w,{people:t,filterValue:y,deletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&b(e.id).then((function(n){o(t.filter((function(n){return n.id!==e.id}))),F("".concat(e.name," deleted")),setTimeout((function(){F(null)}),2e3)})).catch((function(n){I("Information of ".concat(e.name," has already been removed from the server")),setTimeout((function(){I(null)}),5e3)}))}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2c3b3d71.chunk.js.map